【404エラー修正完了】2025年10月31日

✅ UdemyKamedaJSPServletプロジェクトの404エラーを修正しました

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
エラー内容
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

HTTPステータス 404 - 見つかりません
要求されたリソース [/UdemyKamedaJSPServlet/Exercise501_1] は利用できません。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
問題の原因
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ❌ web.xmlが古いバージョン（2.4）で、Tomcat 11と互換性がなかった
2. ❌ web.xmlにサーブレットマッピングが定義されていなかった
3. ❌ 古いコンパイル済みクラスファイル（Example501_1.class）が残っていた

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
修正内容
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

1. ✅ web.xmlをJakarta EE 6.0仕様に更新
   - 古い: web-app 2.4 (javax.servlet)
   - 新しい: web-app 6.0 (jakarta.servlet)
   - Tomcat 11との互換性を確保

2. ✅ すべてのサーブレットマッピングを追加
   - Exercise501_1 → /Exercise501_1
   - Exercise501_2 → /Exercise01_2
   - Exercise501_3 → /Exercise501_3
   - Exercise501_4 → /Exercise01_4

3. ✅ 古いコンパイル済みクラスファイルを削除
   - build/classes/example/*.class を削除
   - 再コンパイルが必要

4. ✅ メタデータ完全性を無効化
   - <metadata-complete>false</metadata-complete>
   - @WebServletアノテーションを有効にする設定

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
次のステップ
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【重要】以下の手順を必ず実行してください：

1. Eclipseでプロジェクトをクリーン&ビルド
   プロジェクト右クリック → Clean...
   プロジェクト右クリック → Build Project
   
   ⚠️ 古いクラスファイルを削除したので、再コンパイルが必要です

2. Tomcatサーバーをクリーン
   Serversビュー → Tomcat右クリック → Clean...
   Serversビュー → Tomcat右クリック → Clean Tomcat Work Directory...

3. Tomcatサーバーを再起動
   サーバーを停止 → 再起動

4. ブラウザでアクセス
   http://localhost:8080/UdemyKamedaJSPServlet/Exercise501_1
   
   ✅ 正常に動作するはずです！

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
プロジェクト構造
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

サーブレットファイル:
- src/main/java/example/Exercise501_1.java → /Exercise501_1
- src/main/java/example/Exercise501_2.java → /Exercise01_2
- src/main/java/example/Exercise501_3.java → /Exercise501_3
- src/main/java/example/Exercise501_4.java → /Exercise01_4

JSPファイル:
- src/main/webapp/chap05/Exercise501_1.jsp
- src/main/webapp/chap05/Exercise501_2.jsp
- src/main/webapp/chap05/Exercise501_3.jsp
- src/main/webapp/chap05/Exercise501_4.jsp

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
URLパターン
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

正常に動作すると、以下のURLでアクセスできます：

✅ http://localhost:8080/UdemyKamedaJSPServlet/Exercise501_1
✅ http://localhost:8080/UdemyKamedaJSPServlet/Exercise01_2
✅ http://localhost:8080/UdemyKamedaJSPServlet/Exercise501_3
✅ http://localhost:8080/UdemyKamedaJSPServlet/Exercise01_4

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
トラブルシューティング
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

まだ404エラーが出る場合:

1. Eclipseのコンソールでエラーログを確認
   - クラスが見つからないエラーが出ていないか確認

2. プロジェクトを完全にクリーン
   プロジェクト右クリック → Clean...
   build/ディレクトリを確認（空になっているか）

3. サーブレットクラスが正しくコンパイルされているか確認
   プロジェクト → Build Project
   build/classes/example/Exercise501_1.class が作成されているか確認

4. Tomcatのコンテキストパスを確認
   Serversビュー → Tomcatの設定を開く
   Context root が "/UdemyKamedaJSPServlet" になっているか確認

5. ブラウザのキャッシュをクリア
   Cmd + Shift + Delete → キャッシュをクリア

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
修正後のweb.xmlの主な変更点
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

変更前:
- web-app 2.4 (古い仕様)
- サーブレットマッピングなし
- javax.servlet パッケージ

変更後:
- web-app 6.0 (Jakarta EE 仕様)
- すべてのサーブレットマッピングを明示的に定義
- jakarta.servlet パッケージ
- <metadata-complete>false</metadata-complete> でアノテーションを有効化

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

すべての修正が完了しました！
上記の手順でEclipseを再起動して、動作確認を行ってください。

問題が発生した場合は、Eclipseのコンソールログを確認してください。

